# NPM 

> 재미있는 사실 `npm`은 [not an acronym](https://twitter.com/npmjs/status/347057301401763840)로 확장되지는 않지만, 친구들 사이에서는 흔히 '노드 패키지 관리자'라고 불립니다.

`npm` 는 커뮤니티 공유 자바스크립트/타입스크립트 패키지를 관리하는 데 사용되는 기본 `node` 설치와 함께 제공되는 바이너리입니다.


* NPM 패키지는 다음 위치에서 호스팅되고 설치됩니다 https://www.npmjs.com/ (the ☁️).

## 빠른 공통 설정(Quick common setup)

* npm 패키지는 `package.json` 파일을 사용하여 구성합니다. `npm init -y`를 사용하여 빠른 파일을 생성할 수 있습니다.
* 패키지는 `./node_modules` 폴더에 설치됩니다. 일반적으로 이 폴더는 `.gitignore`에 있습니다.

> 애플리케이션을 빌드하고 있더라도 `package.json`이 있으면 기본적으로 프로젝트도 패키지가 됩니다. 따라서 '프로젝트 | 패키지'라는 용어는 서로 바꿔서 사용할 수 있습니다.

다른 사람(팀)의 패키지를 체크아웃하면 프로젝트를 실행하는 데 필요한 종속성을 나열하는 `package.json`이 있습니다. `npm install`을 실행하기만 하면 npm이 클라우드에서 해당 종속성을 가져옵니다. ☁️.
 
## 패키지 설치(Installing a package)
당신은 `npm install <something>` 동작을 진행 할 수 있습니다. 대부분의 사람들은 속기 `npm i <something>`을 사용합니다. 예: 

```ts
// Install react
npm i react
```

> 이렇게 하면 `package.json`의 `종속성`에 `react`가 자동으로 추가됩니다.

## 개발자 종속성 설치(Installing a devDependency)
`개발 종속성`은 프로젝트의 *개발* 중에만 필요하고 배포 후에는 필요하지 않은 종속성입니다.  

`typescript`는 `.ts -> .js`를 빌드할 때만 필요하기 때문에 `devDependencies`에서 흔히 볼 수 있습니다. 일반적으로 빌드된 `.js` 파일을 배포합니다:

* 프로덕션에 적용  
* 또는 다른 npm 패키지에서 사용하는 경우

## 보안(Security)
전 세계 보안 팀에서 공개 `npm` 패키지를 검사하고 문제가 발견되면 npm 팀에 보고합니다. 그런 다음 문제와 잠재적 수정 사항을 자세히 설명하는 보안 권고를 발표합니다. 일반적으로 수정은 단순히 패키지를 업데이트하는 것입니다.

노드 프로젝트에 대한 감사는 간단히 `npm audit`를 실행하여 실행할 수 있습니다. 이렇게 하면 패키지의 패키지/종속성에 존재할 수 있는 모든 취약점을 강조 표시합니다. 예:

```
┌───────────────┬──────────────────────────────────────────────────────────────┐
│ Low           │ Regular Expression Denial of Service                         │
├───────────────┼──────────────────────────────────────────────────────────────┤
│ Package       │ debug                                                        │
├───────────────┼──────────────────────────────────────────────────────────────┤
│ Dependency of │ jest [dev]                                                   │
├───────────────┼──────────────────────────────────────────────────────────────┤
│ Path          │ jest > jest-cli > istanbul-lib-source-maps > debug           │
├───────────────┼──────────────────────────────────────────────────────────────┤
│ More info     │ https://nodesecurity.io/advisories/534                       │
└───────────────┴──────────────────────────────────────────────────────────────┘
```

일반적으로 이러한 문제는 *개발* 종속성(예: 이 경우 `jest`)에서 발견된다는 점에 유의하세요. 이러한 종속성은 프로덕션 배포의 일부가 아니므로 프로덕션 애플리케이션이 취약하지 않을 가능성이 높습니다. 하지만 여전히 취약성을 '0'으로 유지하는 것이 좋습니다.

프로젝트가 최신 상태로 유지되도록 배포의 일부로 `npm audit`(오류 발생 시 오류 코드 `1`이 있는 명령어)를 추가하기만 하면 됩니다.

## NPM Scripts 

### 스크립트에서 `--'는 무엇인가요?

제한된 명령줄 인수 집합으로 기본 스크립트를 빌드할 수 있습니다(예: 다음은 TypeScript 컴파일러에서 `tsc`를 실행하는 스크립트 

```json
{
  "scripts": {
    "build": "tsc -p ."
  }
}
```

빌드:워치` 타깃을 생성하여 `tsc -p .`-w` 또는 다음과 같이  플래그를 추가하여 `build`를 실행하도록 npm에 요청할 수 있습니다:

```json
{
  "scripts": {
    "build": "tsc -p .",
    "build:watch": "npm run build -- -w"
  }
}
```
예를 들어, 다음 예제에서 `build:more`는 `something --foo -f -d --bar`와 동일한 효과를 갖습니다.

```json
{
  "scripts": {
    "build": "something --foo",
    "build:more": "npm run build -- -f -d --bar"
  }
}
```

## Public vs. Private packages

일반적인 공개 npm 패키지를 *사용*할 때는 이 옵션이 필요하지 않습니다. 엔터프라이즈/상업 고객을 위한 것만 알아두세요.

### Public packages
* 패키지는 기본적으로 공개되어 있습니다. 
* 누구나 npm에 패키지를 배포할 수 있습니다. 
* 계정만 있으면 됩니다(무료로 받을 수 있음).
 
공개 패키지를 다운로드하는 데 계정이 필요하지 않습니다.

이러한 무료 패키지 공유는 npm의 주요 성공 요인 중 하나입니다. 🌹

### Private packages 

회사/팀/기업을 위한 비공개 패키지를 이용하려면 유료 요금제에 가입해야 하며, 자세한 내용은 https://www.npmjs.com/pricing 에서 확인하세요.

물론 비공개 패키지를 다운로드하려면 적절한 권한이 있는 계정이 필요합니다.
 